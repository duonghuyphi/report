<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Document</title>
    <link rel="stylesheet" href="style.css"/>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
</head>
<body>
<div class="container" ng-app="reportApp" ng-controller="ReportController">
    <h2>Upload Excel File</h2>
    <div ng-controller="SingleUploadCtrl">
        <form ng-submit="uploadReport(selectedOption)" class="d-flex flex-column">
            <div class="d-flex gap-3 mb-3">
                <div class="input-group uploadFile">
                    <input type="file" file-model="reportFile" class="form-control" id="inputGroupFile01" required/>
                </div>
                <button type="submit" class="btn btn-primary" ng-disabled="uploading">
                    <i class="bi bi-upload"></i> Upload
                </button>
                <button onclick="location.reload()" class="btn btn-info" ng-disabled="uploading">
                    <i class="bi bi-arrow-clockwise"></i> Refresh
                </button>
            </div>

            <!-- Radio buttons -->
            <div class="form-check">
                <input type="radio" class="form-check-input" id="report" ng-model="selectedOption" name="uploadOption" value="report" required>
                <label class="form-check-label" for="report">Report</label>
            </div>
            <div class="form-check">
                <input type="radio" class="form-check-input" id="Products" ng-model="selectedOption" name="uploadOption" value="products">
                <label class="form-check-label" for="Products">Products</label>
            </div>
            <div class="form-check">
                <input type="radio" class="form-check-input" id="Gift" ng-model="selectedOption" name="uploadOption" value="gift">
                <label class="form-check-label" for="Gift">Gift</label>
            </div>
            <div class="form-check">
                <input type="radio" class="form-check-input" id="tcl" ng-model="selectedOption" name="uploadOption" value="tclStock">
                <label class="form-check-label" for="tcl">TCL Stock</label>
            </div>
        </form>

        <!-- Th√¥ng b√°o ti·∫øn tr√¨nh -->
        <div ng-show="uploading" class="alert alert-warning mt-2 d-flex">
            ƒêang t·∫£i l√™n file... Vui l√≤ng ch·ªù. <i class="bi bi-arrow-repeat rotate"></i>
        </div>
        <div ng-show="uploadSuccess" class="alert alert-success mt-2">
            üéâ Upload th√†nh c√¥ng!
        </div>
        <div ng-show="uploadError" class="alert alert-danger mt-2">
            ‚ùå Upload th·∫•t b·∫°i. Vui l√≤ng th·ª≠ l·∫°i.
        </div>
    </div>


    <h2>X·ª≠ l√Ω s·∫£n ph·∫©m combo</h2>
    <button class="btn btn-success mb-3" ng-click="viewProcessedCombo()">
        üöÄ X·ª≠ l√Ω v√† hi·ªÉn th·ªã k·∫øt qu·∫£ Combo
    </button>

    <div class="d-flex flex-row align-items-center">
        <h2>Danh s√°ch b·∫£ng</h2>
        <i
                class="bi ms-2"
                ng-class="isHidden ? 'bi-eye-slash' : 'bi-eye'"
                ng-click="toggleTables()"
                style="cursor: pointer"
        ></i>
    </div>
    <ul id="table" class="list-group" ng-style="isHidden && {'display': 'none'}">
        <li
                class="list-group-item d-flex justify-content-between align-items-center"
                ng-repeat="table in tables"
        >
            {{ table }}
            <div>
                <button class="btn btn-sm btn-link" ng-click="viewTable(table)">
                    Xem
                </button>
                <button
                        class="btn btn-sm btn-link text-danger"
                        ng-click="deleteTable(table)"
                >
                    X√≥a
                </button>
            </div>
        </li>
    </ul>

    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#exampleModal"
            ng-style="!flag && {'display': 'none'}">
        ·∫®n/ Hi·ªán c·ªôt
    </button>

    <!-- Modal -->
    <div class="modal fade ds" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Danh s√°ch c·ªôt</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Checkbox T·∫•t c·∫£ -->
                    <div class="form-check">
                        <input
                                type="checkbox"
                                class="form-check-input"
                                ng-model="selectAllColumns"
                                ng-change="toggleAllColumns()"
                                id="selectAllColumns">
                        <label class="form-check-label" for="selectAllColumns">
                            Hi·ªÉn th·ªã t·∫•t c·∫£
                        </label>
                    </div>

                    <div class="form-check" ng-repeat="col in columns">
                        <input
                                type="checkbox"
                                class="form-check-input"
                                ng-model="columnVisibility[col]"
                                id="{{col}}Visibility">
                        <label class="form-check-label" for="{{col}}Visibility">
                            Hi·ªÉn th·ªã c·ªôt {{ col }}
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <hr/>

    <div ng-if="tableData.length > 0">
        <h4>D·ªØ li·ªáu t·ª´ b·∫£ng: {{ selectedTable }}</h4>
        <table class="table table-hover">
            <thead>
            <tr>
                <!-- Dropdown filter: s·∫Ω ·∫©n ho·∫∑c hi·ªán filter d·ª±a tr√™n s·ª± ch·ªçn c·ªßa ng∆∞·ªùi d√πng -->
                <th ng-repeat="col in columns" ng-show="columnVisibility[col]">
                    <select ng-model="filters[col]" class="form-control form-select form-select-sm" ng-show="columnVisibility[col]">
                        <option value="">T·∫•t c·∫£</option>
                        <option ng-repeat="value in getUniqueValues(col)" value="{{ value }}">
                            {{ value }}
                        </option>
                    </select>
                </th>
            </tr>
            <tr>
                <th ng-repeat="col in columns" ng-show="columnVisibility[col]">
                    {{ col }}
                </th>
            </tr>
            </thead>
            <tbody>
            <tr
                    ng-repeat="row in tableData | filter:customFilter"
            >
                <td ng-repeat="col in columns" ng-show="columnVisibility[col]">
                    {{ row[col] || '-' }}
                </td>
            </tr>
            </tbody>
        </table>

    </div>
    <!-- N√∫t Back to Top -->
    <button
            id="backToTopBtn"
            class="btn btn-success rounded-circle"
            title="Tr·ªü v·ªÅ ƒë·∫ßu trang"
            ng-click="scrollToTop()">
        <i class="bi bi-arrow-up"></i>
    </button>

</div>

<!-- Optional JavaScript; choose one of the two! -->

<!-- Option 1: Bootstrap Bundle with Popper -->
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script src="app.js"></script>
</body>
</html>
